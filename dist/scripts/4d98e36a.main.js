"use strict";var data={labels:["d1","d2","d3","d4"],datasets:[{label:"S1",data:[3,34,21,4],color:"rgba(92,154,215,0.7)"},{label:"S2",data:[23,4,7,15],color:"rgba(231,127,56,0.7)"},{label:"S3",data:[12,9,5,23],color:"rgba(162,165,174,0.7)"}]},Util={getMaxNumber:function(a){var b,c=[],d=0;$(a.datasets).each(function(){$(this.data).each(function(a,d){c.push(d),b=Math.max.apply({},c)})});do b+=d,d++;while(b%10!==0);return b},createGrid:function(a,b,c,d){var e,f,g,h,i,j,k=new Kinetic.Layer({id:"grid"});e=a/10,i=(c.height()-40)/e,f=b.datasets[0].data.length,g=Math.round((c.width()-50)/f),h=Math.round((c.width()-50)/(f-1));for(var l=0;e>=l;l++){var m=c.height()-30-l*i,n=new Kinetic.Line({points:[40,m,c.width()-10,m],stroke:"rgba(245, 245, 245, 1)"});k.add(n)}j=d?g:h;for(var o=0;f>o;o++){var p;p=new Kinetic.Text(d?{x:40+j*o,width:j,align:"center",y:c.height()-25,fontSize:10,fontFamily:"Calibri",fill:"#bbb",text:b.labels[o]}:{x:40+j*o-10,width:20,align:"center",y:c.height()-25,fontSize:10,fontFamily:"Calibri",fill:"#bbb",text:b.labels[o]}),k.add(p)}for(var q,r=0;f>r;r++){q=d?40+r*g:40+r*h;var s=new Kinetic.Line({points:[q,10,q,c.height()-30],stroke:"rgba(245, 245, 245, 1)"});k.add(s)}for(var t=e;t>=0;t--){var u=e-t,v=new Kinetic.Text({x:0,width:30,align:"right",y:5+i*t,fontSize:10,fontFamily:"Calibri",fill:"#bbb",text:10*u});k.add(v)}c.add(k)},createBars:function(a,b,c,d){var e=b.datasets[0].data.length,f=b.datasets.length,g=2,h=Math.round((c.width()-50)/e);$(b.datasets).each(function(e){var i=b.datasets[e].color,j=Math.round(.6*h/f-(f-1)*g);!function(e){var f=new Kinetic.Layer({id:d+e});$(b.datasets[e].data).each(function(b,d){var g=new Kinetic.Rect({x:Math.round(h*(b+.2))+e*(j+2)+44,y:c.height()-30,offset:{x:0,y:d/a*(c.height()-40)},width:j,height:Math.round(d/a*(c.height()-40)),strokeWidth:0,fill:i});f.add(g)}),c.add(f)}(e)})},createLines:function(a,b,c,d){var e=b.datasets[0].data.length,f=Math.round((c.width()-50)/(e-1));$(b.datasets).each(function(e){var g=b.datasets[e].color;!function(e){var h=new Kinetic.Layer({id:d+e});$(b.datasets[e].data).each(function(d,i){var j=b.datasets[e].data[d+1],k=new Kinetic.Line({x:40,y:c.height()-30,stroke:g,points:[f*d,-Math.round(i/a*(c.height()-40)),f*(d+1),-Math.round(j/a*(c.height()-40))]});h.add(k)}),c.add(h)}(e)})},createLegends:function(a,b,c,d,e,f){$(a).append('<ul class="legends"></ul>'),$(b.datasets).each(function(g){$(".legends",a).append('<li><span class="'+e+g+'"></span>'+b.datasets[g].label+"</li>");var h=b.datasets[g].color;$("."+e+g,a).css("background-color",h),$(".legends>li",a).eq(g).on("mouseover",function(){$(this).find("span").css("background-color","transparent");var a="#"+$(this).find("span").attr("class"),b=c.find(a)[0];b.children.each(function(a){f?a.fill(d):a.stroke(d)}),b.draw()}).on("mouseout",function(){$(this).find("span").css("background-color",h);var a="#"+$(this).find("span").attr("class"),b=c.find(a)[0];b.children.each(function(a){f?a.fill(h):a.stroke(h)}),b.draw()})})}},Common=Util||{};!function(){var a=new Kinetic.Stage({container:"bar-chart-wrapper",width:410,height:200}),b=Common.getMaxNumber(data);Common.createGrid(b,data,a,!0),Common.createBars(b,data,a,"bar"),Common.createLegends("#bar-chart-wrapper",data,a,"rgba(0,188,84,0.7)","bar",!0)}(),function(){var a=new Kinetic.Stage({container:"line-chart-wrapper",width:410,height:200}),b=Common.getMaxNumber(data);Common.createGrid(b,data,a,!1),Common.createLines(b,data,a,"line"),Common.createLegends("#line-chart-wrapper",data,a,"rgba(0,188,84,0.7)","line",!1)}();